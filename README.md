# Лабораторная работа №2. HTTP-запросы и шаблонизация в Laravel

## Цель работы

Изучить основные принципы работы с HTTP-запросами в Laravel и шаблонизацию с использованием Blade на основе веб-приложения `To-Do App для команд` — приложения для управления задачами внутри команды.

## Задания

### №1. Подготовка к работе, установка Laravel

1. Откройте терминал и создайте новый проект Laravel с именем `todo-app` с помощью Composer.
2. Перейдите в директорию проекта.
3. Запустите встроенный сервер Laravel.
   **Вопрос**: Что вы видите в браузере, открыв страницу `http://localhost:8000`?
   Стартовая страница Laravel
   ![Image](./1.jpg)

### №2. Настройка окружения

1. Откройте файл `.env` и укажите следующие настройки приложения:
   ```ini
   APP_NAME=ToDoApp
   APP_ENV=local
   APP_KEY=
   APP_DEBUG=true
   APP_URL=http://localhost:8000
   ```
2. Сгенерируйте ключ приложения, который будет использоваться для шифрования данных.
  ![Image](./2.jpg)

   **Вопрос**: Что будет, если данный ключ попадет в руки злоумышленника?

   Если данный ключ попадет в руки злоумышленника, они смогут расшифровать данные, зашифрованные приложением, например, пользовательские сессии и конфиденциальную информацию, что может привести к компрометации безопасности приложения.

### №3. Основы работы с HTTP-запросами

#### №3.1. Создание маршрутов для главной страницы и страницы "О нас"

1. Создайте класс-контроллер `HomeController` для обработки запросов на главную страницу.
   
php artisan make:controller HomeController

3. Добавьте метод `index` в `HomeController`, который будет отвечать за отображение главной страницы.
```php
<?php
namespace App\Http\Controllers;
use Illuminate\Http\Request;
class HomeController extends Controller
{
    public function index()
    {
        return view('home'); // Отображение главной страницы
    }
}
```
3. Создайте маршрут для главной страницы в файле `routes/web.php`.
  ```ini
   public function index()
   {
      return view('home');
   }
   ```
   - Откройте браузер и перейдите по адресу `http://localhost:8000`.

  ![Image](./3.jpg)

4. В этом же контроллере `HomeController` создайте метод для страницы **"О нас"**.
```ini
public function about()
    {
        return view('about'); // Страница "О нас"
    }
```
5. Добавьте маршрут для страницы "О нас" в файле `routes/web.php`.
```ini
Route::get('/about', [HomeController::class, 'about'])->name('about');
```

#### №3.2. Создание маршрутов для задач

1. Создайте класс-контроллер `TaskController` для обработки запросов, связанных с задачами, и добавьте следующие методы:
   - `index` — отображение списка задач;
   - `create` — отображение формы создания задачи;
   - `store` — сохранение новой задачи;
   - `show` — отображение задачи;
   - `edit` — отображение формы редактирования задачи;
   - `update` — обновление задачи;
   - `destroy` — удаление задачи.

2. Создайте маршруты для методов контроллера `TaskController` в файле `routes/web.php` и укажите правильные HTTP-методы для каждого маршрута.
3. Используйте группирование маршрутов для контроллера `TaskController` с префиксом `/tasks`.
4. Определите правильные имена маршрутов для методов контроллера `TaskController`, например:
   - `tasks.index` — список задач;
   - `tasks.show` — отображение отдельной задачи.
   - ...
5. Добавьте валидацию параметров маршрута `id` для задач. Убедитесь, что параметр `id` — это положительное целое число. Используйте метод `where`.
 ```  namespace App\Http\Controllers;
use Illuminate\Http\Request;
class TaskController extends Controller
{
    public function index()
    {
        return 'This is a list of tasks'; // Отображение списка задач
    }
    public function create()
    {
        // Отображение формы создания задачи
    }
    public function store(Request $request)
    {
        // Сохранение новой задачи
    }
    public function show($id)
    {
        return "Displaying task with ID: $id"; // Отображение задачи
    }
    public function edit($id)
    {
        // Отображение формы редактирования задачи
    }
    public function update(Request $request, $id)
    {
        // Обновление задачи
    }
    public function destroy($id)
    {
        // Удаление задачи
    }
}
```
6. В файле `routes/web.php` замените ручное создание маршрутов для контроллера `TaskController` на ресурсный контроллер:
      ```php
      Route::resource('tasks', TaskController::class);```
   
7. Проверьте созданные маршруты с помощью команды `php artisan route:list`.

![Image](./4.jpg)

### №4. Шаблонизация с использованием Blade

#### №4.1. Создание макета страницы

1. Создайте макет основных страниц `layouts/app.blade.php` с общими элементами страницы.
2. Используйте директиву `@yield` для определения области, в которую будут вставляться содержимое различных страниц.

![Image](./5.jpg)

#### №4.2. Использование шаблонов Blade

1. Создайте представление для главной страницы `home.blade.php` с использованием макета `layouts/app.blade.php` в каталоге `resources/views`.

   ![Image](./6.jpg)
   
3. Создайте представление для страницы "О нас" — `about.blade.php` с использованием макета `layouts/app.blade.php` в каталоге `resources/views`.
```
@extends('layouts.app')
@section('title', 'О нас')
@section('content')
    <div class="text-center">
        <h1>О нас</h1>
        <p>Мы команда, работающая над созданием простого и удобного приложения для управления задачами.</p>
        <p>Наше приложение помогает командам быть организованными и продуктивными.</p>
    </div>
@endsection
```
4. Создайте представления для задач со следующими шаблонами в каталоге `resources/views/tasks`:
   - `index.blade.php` — список задач;
   - `show.blade.php` — отображение задачи;
   - ...
   
![Image](./7.jpg)

#### №4.3. Анонимные компоненты Blade

1. Создайте анонимный компонент для отображения `header`. Используйте созданный компонент в макете `layouts/app.blade.php`.
```<header>
    <h1>{{ $title }}</h1>
    <nav>
        <ul>
            <li><a href="{{ route('tasks.index') }}">Список задач</a></li>
            <li><a href="{{ route('tasks.create') }}">Создать задачу</a></li>
            <li><a href="{{ route('about') }}">О нас</a></li>
        </ul>
    </nav>
</header>
```
2. Создайте анонимный компонент для отображения задачи:
   1. Компонент должен быть простым и использовать передаваемые параметры с помощью директивы `@props`. Это сделает шаблоны более гибкими и переиспользуемыми на различных страницах.
   2. Компонент должен отображать информацию о задаче:
      1. Название задачи;
      2. Описание задачи;
      3. Дата создания задачи;
      4. Дата обновления задачи;
      5. Действия над задачей (редактирование, удаление);
      6. Статус задачи (выполнена/не выполнена);
      7. Приоритет задачи (низкий/средний/высокий);
      8. Исполнитель задачи (Assignment), то есть имя пользователя, которому назначена задача.
3. Отобразите созданный компонент задачи на странице `show.blade.php` с использованием передаваемых параметров.
   
![Image](./9.jpg)

#### №4.4. Стилизация страниц

1. Добавьте стили для страниц с использованием CSS или препроцессоров (например, Sass или Less).
2. Создайте файл стилей `app.css` в каталоге `public/css` и подключите его к макету `layouts/app.blade.php`.
3. Добавьте стили для элементов страницы, таких как заголовки, меню навигации, кнопки, формы и т. д.

## Контрольные вопросы

1. Что такое ресурсный контроллер в Laravel и какие маршруты он создает?
Ресурсный контроллер в Laravel — это специальный контроллер, который автоматически создает набор маршрутов для выполнения операций CRUD (создание, чтение, обновление и удаление) с использованием стандартных методов.GET	/tasks,GET	/tasks/create,POST	/tasks,GET	/tasks/{id},GET	/tasks/{id}/edit,PUT/PATCH	/tasks/{id},DELETE	/tasks/{id}.
2. Объясните разницу между ручным созданием маршрутов и использованием ресурсного контроллера.
Ручное создание маршрутов: Вы создаете каждый маршрут отдельно и связываете его с соответствующим методом контроллера. Это может быть удобно для простых приложений, но для более сложных приложений это может привести к большому количеству повторяющегося кода. Например, вы должны вручную определить каждый маршрут, что может занять больше времени и быть подверженным ошибкам.
Использование ресурсного контроллера: Позволяет автоматически генерировать маршруты для всех операций CRUD с минимальными усилиями. Это значительно сокращает количество кода, который нужно писать, и делает его более читаемым и понятным. Упрощает поддержку приложения, так как все маршруты для конкретного ресурса находятся в одном месте.
3. Какие преимущества предоставляет использование анонимных компонентов Blade?
Упрощение структуры шаблонов,переиспользование кода, гибкость, лучшая организация.
4. Какие методы HTTP-запросов используются для выполнения операций **CRUD**?
 POST,GET,PUT/PATCH,DELETE.
